#!/usr/bin/make -f

PACKAGE = wmitime
BIN	= $(PACKAGE)/$(PACKAGE)

include /usr/share/dpkg/buildflags.mk
CFLAGS	+= -Wall -pedantic
LDFLAGS += -Wl,--as-needed
export CFLAGS LDFLAGS

include debian/debian-vars.mk

man:
	$(MAKE) -C debian -f pod2man.mk PACKAGE=$(PACKAGE) makeman

override_sh_auto_build:
	$(MAKE) -C wmitime FLAGS="$(CFLAGS) $(LDFLAGS)"

override_dh_auto_clean:
	# Commands to clean up after the build process.
	[ ! -f wmitime/Makefile ] || $(MAKE) -C wmitime clean

override_sh_auto_install:
	install -D -m 755  $(BIN) $(BINDIR)/$(PACKAGE)
	$(INSTALL_DIR) $(DESKTOPDIR)
	$(INSTALL_DATA) debian/*.desktop $(DESKTOPDIR)

%:
	dh $@

.PHONY: man

# End of file
